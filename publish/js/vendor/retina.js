(function(){function d(a){this.path=a;this.at_2x_path=a.replace(/\.\w+$/,function(a){return"@2x"+a})}function e(a){this.el=a;this.path=new d(this.el.getAttribute("src"));var b=this;a.className!="non_retina"&&this.path.check_2x_variant(function(a){a&&b.swap()})}var f=typeof exports=="undefined"?window:exports;f.RetinaImagePath=d;d.confirmed_paths=[];d.prototype.is_external=function(){return!(!this.path.match(/^https?\:/i)||this.path.match("//"+document.domain))};d.prototype.check_2x_variant=function(a){var b,
c=this;if(this.is_external())return a(!1);else if(this.at_2x_path in d.confirmed_paths)return a(!0);else b=new XMLHttpRequest,b.open("HEAD",this.at_2x_path),b.onreadystatechange=function(){return b.readyState!=4?a(!1):b.status>=200&&b.status<=399?(d.confirmed_paths.push(c.at_2x_path),a(!0)):a(!1)},b.send()};f.RetinaImage=e;e.prototype.swap=function(a){function b(){c.el.complete?(c.el.setAttribute("width",c.el.offsetWidth),c.el.setAttribute("height",c.el.offsetHeight),c.el.setAttribute("src",a)):setTimeout(b,
5)}if(typeof a=="undefined")a=this.path.at_2x_path;var c=this;b()};if(f.devicePixelRatio>1){var g=window.onload||new Function;window.onload=function(){var a=document.getElementsByTagName("img"),b=[],c,d;for(c=0;c<a.length;c++)d=a[c],b.push(new e(d));g()}}})();
